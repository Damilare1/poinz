$zuehlkeBackgroundGrey = rgb(250, 250, 250)
$zuehlkeBlue = #0099CC;
$zuehlkePurple = #985b9c
$zuehlkeOrange = #ff820a
$zuehlkeLightGrey = #575d62
$zuehlkeLighterGrey = #e8e8e8
$zuehlkeFontGrey = #484e54
$zuehlkeFont = "aa_zuehlke_otpsregular", "Helvetica Neue", Helvetica, Arial, sans-serif

@font-face {
  font-family 'aa_zuehlke_otpsregular'
  src url('./aazuotps_30.12.13-webfont.woff2') format("woff2")
  font-weight normal
  font-style normal
}

body {
  color $zuehlkeFontGrey
}

#app-root {
  position absolute
  top 0
  left 0
  bottom 0
  right 0
}

.clickable {
  cursor pointer
}

.pure-button {
  border-radius 2px

  &.pure-button-primary {
    background-color $zuehlkeBlue
  }

  i.button-icon-left {
    padding-right 8px
  }

  i.button-icon-right {
    padding-left 8px
  }

  &.pure-button-stripped {
    background none
    border none
    box-shadow none
    opacity 0.6

    &:hover {
      opacity 1
    }

    &.active {
      opacity 1
      color $zuehlkeOrange
    }
  }
}

a {
  color $zuehlkeOrange
}

.landing {
  background #1f8dd6
  z-index 1
  overflow hidden
  width 100%
  height 100%
  top 0
  left 0
  position fixed !important
  background url('./landing_bg_z2020_lightblue.jpg') no-repeat center center fixed
  background-size cover

  .landing-inner {
    margin-top 20%
  }

  .eyecatcher {
    margin auto
    display flex
    justify-content center
    align-items center
    flex-direction column
    width 400px
    max-width 85%
    background rgba(0, 0, 0, 0.5)
    color white
    padding 18px 32px 32px 32px
    border-radius 2px
    margin-bottom 16px

    input {
      color $zuehlkeFontGrey
    }

    .info-text {
      display flex
      align-items center

      .leading-paragraph-icon {
        font-size 30px
        margin-right 16px
      }

      .leading-paragraph-icon-small {
        font-size 20px
        margin-right 16px
      }
    }

    &.disclaimer-text {
      font-size: 13px;
    }

    &.loading {
      color white
      font-size larger
    }

    .custom-room-name-wrapper, .username-wrapper {
      background #fff
      padding 8px
      border 1px solid #ccc
      width 300px
      display flex
      align-items stretch
      border-radius 2px

      span {
        padding 8px 0
      }

      input {
        width 80%
        border none
        outline none
      }
    }

    .custom-room-name-wrapper {
      margin-top 20px
      width 200px
    }


    .create-room-button {
      border-radius: 2px 0 0 2px;
    }

    .create-room-extend-button {
      border-radius: 0 2px 2px 0;
    }
  }
}

.avatar {
  border 2px solid $zuehlkeLightGrey
  border-radius 50%
  background white
  width 60px
  height 60px
  padding 4px
  display block
  margin 0 auto
}

.users {
  padding 16px
  padding-top 48px

  .user {
    cursor pointer
    padding 0 8px
    display inline-block
    position relative


    .user-name {
      text-align center
      margin 4px 0
      max-width 90px
      text-overflow ellipsis
      white-space nowrap
      overflow hidden
    }

    .user-estimation {
      transition all 0.2s ease-out
      height 100px
      width 76px
      margin 0 auto
      text-align center
      padding 28px 0
      border-radius 12px
      box-sizing border-box
      font-size 28px
      border 4px dashed $zuehlkeLighterGrey
      background transparent
      color $zuehlkeLightGrey

      font-family "aa_zuehlke_otpsregular", "Helvetica Neue", Helvetica, Arial, sans-serif

      &.user-estimation-given {
        // user has given estimation, but value is not yet shown
        border 4px solid white
        background $zuehlkeLightGrey
        color $zuehlkeLighterGrey
      }

      &.revealed {
        // all estimations are shown
        background white
        color $zuehlkeLightGrey
        border 4px solid white
      }
    }

    img.avatar {
      // for mobile screens, do not show avatars, (still display the user name)
      // for larger screens display=block, see media query
      display none
    }

    .excluded-badge, .disconnected-badge {
      position absolute
      top 0
      right 0
    }

    &.user-own {
      color $zuehlkeOrange
      cursor inherit

      .avatar {
        border 2px solid $zuehlkeOrange
      }
    }

    &.user-excluded {
      .user-estimation {
        // set attributes !important to override custom card color styles
        border 4px solid transparent !important
        background transparent !important
        color transparent !important
      }
    }

    .kick-overlay {
      position absolute
      top 0
      width 72px
      height 72px
      font-size 64px
      display flex
      justify-content space-around
      align-items center
      left 50%
      margin-left -36px

      > i {
        display inline-block
        font-size 22px
        cursor pointer
        padding 6px
        width 18px
        height 18px
        line-height 18px
        text-align center
        vertical-align middle
        background white
        border-radius 50%
        opacity 0.9
        color $zuehlkeLightGrey

        &:hover {
          opacity 1

          &.fa-sign-out {
            color #ee3f21
          }
        }
      }
    }


    &.user-disconnected, &.user-marked-kick {
      color $zuehlkeLightGrey

      .avatar {
        -webkit-filter grayscale(100%)
        filter gray;
      }

    }
  }
}

.app-status {
  padding 48px

  ul.rooms {
    display table
    margin 0
    padding 0

    .headers {
      font-weight 700
    }

    li {
      display table-row

      > div {
        display table-cell
        padding 0 4px
      }
    }
  }
}


.top-bar {
  z-index 1003
  display flex
  justify-content space-between
  position fixed
  box-shadow 0 1px 2px 0 #cccccc
  background $zuehlkeBackgroundGrey
  top 0
  left 0
  right 0
  height 34px
  padding 0
  box-sizing border-box

  .left-logo-container {
    display flex

    .poinz-logo {
      font-family $zuehlkeFont
      font-size 29px
      padding-left 8px
      color $zuehlkePurple
    }
  }

  .quick-menu {
    display: flex;
    align-items: center;

    .whoami {
      padding 0 8px
      display block

      .whoami-extended {
        display none
      }

      .whoami-simple {
        max-width: 10vh;
        overflow: hidden;
        text-overflow: ellipsis;
        display: inline-block;
        white-space: nowrap;
      }

      &:hover {
        .whoami-extended {
          display inline-block
        }

        .whoami-simple {
          display none
        }
      }

    }

    // wheel icon to toggle user menu
    // list  icon to toggle action log

    a.user-menu-toggle, a.log-toggle, a.leave-room {
      display block
      width 34px
      height 34px
      font-size 22px
      padding 4px 8px
      box-sizing border-box
      color white
      border-radius 0
      background $zuehlkeBlue
    }

  }

}

// hamburger icon to toggle backlog on small screens
.backlog-toggle {
  display block
  font-size 10px
  z-index 10
  width 34px
  height 34px
  background $zuehlkeBlue

  .menu-link-inner {
    position relative
    display inline-block
    box-sizing border-box
    padding 8px
    height 100%
    width 100%

    span, span:before, span:after {
      background-color #fff
      width 17px
      height 0.2em
      display inline-block
    }

    span:before, span:after {
      position absolute
      margin-top -0.6em
      content " "
    }

    span:after {
      margin-top 0.6em
    }
  }

}

$userMenuWidth = 300px
.user-menu {
  z-index 10
  position fixed
  width $userMenuWidth
  top 0
  bottom 0
  right $userMenuWidth * -1
  transition all 0.2s ease-out
  background $zuehlkeBackgroundGrey
  -webkit-overflow-scrolling touch
  box-sizing border-box
  padding 8px
  padding-top 27px

  &.user-menu-active {
    right 0
  }

  &:after {
    content: "";
    border-right: 1px solid #e8e8e8;
    top: 44px;
    left: 0;
    position: absolute;
    bottom: 20px;
  }

  h5 {
    color $zuehlkeOrange
    font-weight 700
    margin-bottom 8px
    margin-top: 0
  }

  .license-hint {
    font-size small
    margin-bottom 12px
    position absolute
    bottom 7px
  }

  .pure-form {

    .user-menu-section {
      background: white;
      border: 1px solid $zuehlkeLighterGrey
      padding: 8px;
      margin: 16px 0;
    }

    .username-wrapper, .email-wrapper {
      display: flex;
      align-items: stretch;
      padding 4px

      input {
        width 80%
        border none
        border-bottom 1px solid $zuehlkeLighterGrey
        padding 1px 0
        margin-right 4px
      }
    }

    .avatar-grid {
      margin-top 24px
      margin-bottom 24px

      display flex
      flex-wrap wrap

      img {
        cursor pointer
        width 32px
        height 32px
        margin-right 4px
        border-radius 50%
        border 2px solid transparent
        padding 2px

        &:hover, &.selected {
          border 2px solid $zuehlkeOrange
        }
      }
    }

    .language-selector-wrapper {
      label {
        display inline-block
        margin-right 8px
        cursor pointer

        /** radio buttons **/

        input {
          margin-right 4px
          display inline-block
        }
      }
    }

    input, textarea {
      background transparent
      border none
      border-radius 0
      border-bottom 1px solid white
    }
  }
}

.action-log {
  z-index 10
  position fixed
  width $userMenuWidth
  top 0
  bottom 0
  right $userMenuWidth * -1
  transition all 0.2s ease-out
  -webkit-overflow-scrolling touch
  box-sizing border-box
  padding 8px
  padding-top 27px

  background $zuehlkeBackgroundGrey

  &:after {
    content: "";
    border-right: 1px solid #e8e8e8;
    top: 44px;
    left: 0;
    position: absolute;
    bottom: 20px;
  }

  &.action-log-active {
    right 0
  }

  h5 {
    color $zuehlkeOrange
    font-weight 700
    margin-bottom 8px
  }

  .action-log-wrapper {
    top 73px
    bottom 16px
    position absolute
    overflow-x hidden
    overflow-y auto
    left 8px
    right 8px

    ul {
      width 100%
      margin 0
      padding 0
      list-style-type none

      li {
        background #fff
        padding 4px
        margin-bottom 8px
        box-sizing border-box
        border 1px solid $zuehlkeLighterGrey

        > span {
          display block
        }

        > span:first-child {
          color $zuehlkeLightGrey
          font-size 12px
        }

        &:first-child {
          border-left 2px solid $zuehlkeOrange
        }
      }
    }
  }
}

// action log also displayed on landing page, styled differently
.landing .action-log-landing {
  ul {
    width 100%
    margin 0
    padding 0
    list-style-type none

    li {
      padding 4px
      margin-bottom 8px
      box-sizing border-box

      > span {
        display block
      }

      > span:first-child {
        font-size 12px
      }
    }
  }
}

.leave-room-button {
  bottom 8px
  position absolute
  right 8px
}

.pure-form {

  .pure-group {
    input:first-child, textarea:first-child, input:last-child, textarea:last-child {
      border-radius 0
    }
  }

  textarea, input {
    box-shadow none !important
    border-radius none !important
  }

  &.pure-form-stacked label {
    margin-top 16px
  }
}

.waiting {
  // this is needed, so that we can position the gray overlay accordingly
  position relative

  &:before {
    display inline-block
    position absolute
    width 100%
    height 100%
    background rgba(0, 0, 0, 0.3)
    left 0
    top 0
    content " "
  }

  &.card-inner:before {
    border-radius 12px
  }

  &:after {
    -webkit-animation fa-spin 2s infinite linear
    animation fa-spin 2s infinite linear
    font normal normal normal 14px / 1 FontAwesome
    text-rendering auto
    -webkit-font-smoothing antialiased
    content "\F110"
    position absolute
    left 50%
    top 50%
    font-size 26px
    margin-left -13px
    margin-top -13px
  }
}

$backlogWidth = 300px

.board {
  transition all 0.2s ease-out
  position relative
  min-height 100%
  height auto
  background $zuehlkeBackgroundGrey

  .backlog {
    transition all 0.2s ease-out
    margin-left $backlogWidth * -1
    width $backlogWidth
    position fixed
    top 0
    left 0
    bottom 0
    z-index 1000
    overflow-y auto
    -webkit-overflow-scrolling touch
    box-sizing border-box
    padding-top 44px
    background $zuehlkeBackgroundGrey

    &:after {
      content: "";
      border-right: 1px solid $zuehlkeLighterGrey;
      top: 44px;
      right: 0;
      position: absolute;
      bottom: 20px;
    }

    .backlog-mode-buttons {

      button.pure-button.pure-button-stripped.active {

      }
    }

    .story-hint {
      margin-top 16px
      text-align center
    }

    .story-drop-zone {

      outline: none;
      border: none;
      min-height: 90%;

      .drag-overlay {
        display none
        position absolute
        left 0
        right 0
        top 33px
        bottom 0
        margin 4px
        font-size 62px
        border 4px dashed rgba(0, 153, 204, 0.25)
        color rgba(0, 153, 204, 0.25)
        z-index 0
      }

      &.story-drop-zone-active.story-drop-zone-accept .drag-overlay {
        z-index 1000
        display: flex;
        justify-content center
        align-items center
        border 4px dashed rgba(0, 153, 204, 0.25)
        color rgba(0, 153, 204, 0.25)
      }

      &.story-drop-zone-active.story-drop-zone-reject .drag-overlay {
        z-index 1000
        display: flex;
        justify-content center
        align-items center
        border 4px dashed rgba(255, 130, 10, 0.3)
        color rgba(255, 130, 10, 0.3)
      }
    }

    .button-group > div {
      padding 0 4px
      box-sizing border-box
    }

    .story-add-form {
      background white;
      border: 1px solid $zuehlkeLighterGrey
      padding 8px 16px 16px 16px
      margin 3px 8px 16px 8px
      box-sizing border-box
      border-radius 2px
    }

    .pure-form {
      input, textarea {
        resize vertical
        background transparent

        border none
        border-bottom 1px solid $zuehlkeLighterGrey
      }

      textarea {
        min-height: 64px;
      }
    }

    .stories {
      margin 16px 8px 0 8px

      .story {
        position relative
        background white
        padding 8px 16px 16px 16px
        margin-bottom 16px
        box-sizing border-box
        border: 1px solid $zuehlkeLighterGrey

        > .story-toolbar {

          display flex
          position absolute
          right 4px
          top 4px
          font-size 18px

          > i {
            margin 0 4px
            opacity 0 // do not show by default
            display block
            padding 6px
            width 18px
            height 18px
            line-height 18px
            cursor pointer
            text-align center
            vertical-align middle
          }
        }

        &:hover {
          box-shadow inset 0 82px 50px -60px rgba(194, 194, 194, 0.45)
        }

        &:hover > .story-toolbar i {
          opacity 0.6
          background white
          border-radius 50%

          &:hover {
            opacity 1 // show the pencil with full opacity when icon is hovered

            &.story-delete {
              color #ee3f21;
            }
          }
        }

        &.story-selected {
          border-left 2px solid $zuehlkeOrange
        }

        &.story-edit-mode:hover {
          box-shadow none
        }

        &.story-waiting {
          > i {
            position absolute
            top 4px
            right 4px
          }
        }

        h4 {
          line-height 24px
          display flex
          margin-top 12px
          margin-bottom 0
          justify-content space-between
        }

        .story-text {
          margin-top 4px
          white-space pre-wrap
          display inline-block
        }
      }
    }
  }

  .estimation {
    padding 16px

    .selected-story {
      background white
      border 1px solid $zuehlkeLighterGrey
      padding 8px
      position relative

      > .applause-highlight {
        position absolute
        top 0
        left 0
        width 100%
        height 100%
        border 1px solid $zuehlkeLighterGrey
        animation-name flash_shadow
        animation-duration 2s
        animation-timing-function linear
        animation-iteration-count 3
      }

      h4 {
        margin-top 8px
        margin-bottom 0
        line-height 24px
        display flex
        justify-content space-between
      }

      .story-text {
        margin-top 4px
        white-space pre-wrap
        display inline-block
      }


    }

    .board-actions {
      margin-top 16px
    }

    .cards {

      display flex
      flex-wrap wrap

      button.card, button.card:focus {
        min-width 30vw
        display block
        border none
        outline none
        background transparent
        text-align center
        height 100px
        box-sizing border-box
        font-size 28px
        padding 8px
        font-family $zuehlkeFont

        .card-inner {
          position relative
          background #fff
          padding 28px 0
          box-sizing border-box
          border-radius 12px
          border 4px solid white

          &hover {
            border 2px solid $zuehlkeOrange
          }
        }

        &.card-selected {
          .card-inner {
            border 4px solid $zuehlkeOrange
          }
        }
      }

      button.card:focus {
        .card-inner {
          border 4px solid $zuehlkeDarkGrey
        }
      }
    }
  }

}

.room-footer {
  display flex
  justify-content flex-end
  align-items baseline
  position fixed
  bottom 8px
  right 8px
  font-size 9px
  color $zuehlkeFontGrey

  > div {
    margin-right 16px
  }
}

.feedback-hint {
  position absolute
  border 1px solid $zuehlkeBlue
  background #fff
  padding 8px
  font-size 13px
  margin-top 28px
  display flex
  bottom 30px
  right 20px
  width 245px
  padding-right 20px

  img.avatar {
    width 40px
    height 40px
    border-width 1px
    box-sizing border-box
    margin 0 8px 0 0
  }

  > div {
  }

  > i {
    position absolute
    top 4px
    right 4px
  }
}


.consensus-badge {
  display flex
  width 24px
  height 24px
  border-radius 50%
  margin-left 8px

  justify-content center
  align-items center

  > div {
    font-size 12px
    color white
    font-family "aa_zuehlke_otpsregular", "Helvetica Neue", Helvetica, Arial, sans-serif
  }

}

// on screens bigger than 48em width
@media (min-width 48em) {

  .backlog-toggle {
    position fixed
    left $backlogWidth
    display none
  }

  .board {
    padding-left $backlogWidth
    left 0

    .backlog {
      left $backlogWidth
    }
  }

  .users .user img.avatar {
    display block
  }

  .board .estimation .cards {
    button.card, button.card:focus {
      min-width 100px
    }
  }
}

// in every screen-size, if backlog-active class is set, show menu

.board .backlog.backlog-active {
  left $backlogWidth
}


@keyframes flash_shadow {
  0% {
    opacity 1
  }
  50% {
    opacity 0
  }
  100% {
    opacity 1
  }
}

